% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prep_card.R
\name{prep_combine_vars}
\alias{prep_combine_vars}
\title{Unite variables}
\usage{
prep_combine_vars(x, vars, remove = TRUE)
}
\arguments{
\item{x}{(data.frame)}

\item{vars}{(character) a vector of variables to unite. If a single variable
is supplied, the input is returned unchanged.}

\item{remove}{If \code{TRUE}, remove input columns from output data frame.}
}
\value{
a data.frame with an additional column, called \code{variable_level} or
the input unchanged.
}
\description{
A wrapper around \code{tidyr::unite()} which pastes several columns into one.
In addition it checks the output is identical to \code{dplyr::coalesce()}. If not
the input is returned unchanged. Useful for uniting sparsely populated
columns, for example when processing a \code{shuffled_card} created with
\code{card::ard_stack()}.
}
\details{
If the data is the result of a hierarchical ard stack, the input is returned
unchanged.
}
\examples{
df <- data.frame(
  a = 1:6,
  context = rep("categorical", 6),
  b = c("a", rep(NA, 5)),
  c = c(NA, "b", rep(NA, 4)),
  d = c(NA, NA, "c", rep(NA, 3)),
  e = c(NA, NA, NA, "d", rep(NA, 2)),
  f = c(NA, NA, NA, NA, "e", NA),
  g = c(rep(NA, 5), "f")
)

prep_combine_vars(
  df,
  vars = c("b", "c", "d", "e", "f", "g")
)
}
